{"ast":null,"code":"var R = require('ramda');\n\nvar Rx = require('rx');\n\nvar xml2js = require('xml2js');\n\nvar TAGNAME_KEY = require('./xml2js-name-key');\n\nmodule.exports = R.curry(function xml(opts, source) {\n  var options = require('./options')(opts);\n\n  var pickKeys = R.pick([TAGNAME_KEY, options.attrkey, options.childkey]);\n  var parser = new xml2js.Parser(options);\n  return Rx.Observable.create(function (observer) {\n    var disposed = false;\n    var data;\n    parser.parseString(source, function (error, result) {\n      if (disposed) {\n        return;\n      }\n\n      if (error) {\n        observer.onError(error);\n      } else {\n        data = pickKeys(result);\n        observer.onNext(data);\n        observer.onCompleted();\n      }\n    });\n    return Rx.Disposable.create(function () {\n      if (!disposed) {\n        disposed = true;\n      }\n    });\n  });\n});","map":null,"metadata":{},"sourceType":"script"}